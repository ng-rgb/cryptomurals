<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRYPTOMURALS</title>
  <link rel="icon" href="./resources/favicon.ico" />
  <link rel="stylesheet" href="./navBar.css">
  <link rel="stylesheet" href="./main.css">
  <link rel="stylesheet" href="./hamburger.css">

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.0/dist/sweetalert2.all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
</head>

<body>
  <div id="main-navbar">
    <div style="margin-left: 30px;margin-right: 30px;flex-direction:row" class='nav-layout'>
      <div style="display: flex;flex: 1" class="menu">
        <div style="display: flex" class='hamburguer-menu-container'>
          <div style="align-self: center; width: 100px;" class='hamburger hamburger--vortex-r hamburguer-menu'>
            <div class='hamburger-box'>
              <div class='hamburger-inner'></div>
            </div>
          </div>
          <div style="
                        margin: auto;
                        color: white;
                        text-decoration: underline;
                        font-family: Monoton;
                        " class='city-layout'>
            CITY
          </div>
        </div>
        <div style="display: flex; justify-content: center; flex: 1">
          <div style="justify-content: center">
            <img class='logo-cryptomurals' width='100%' height='100px' src="./resources/logo_cryptomurals.svg"
              alt="logo cryptomurals" />
          </div>
        </div>
        <div style="
                            position: fixed;
                            top: 90px;
                            left: 0px;
                            width: 600px;
                            z-index: 999" class="menu-main hidden">
          <div class='options-menu'>Home</div>
          <div class='options-menu'><a href="https://gardens.1hive.org/#/matic/garden/0x963d4a1cd9fb345a624e46c9470df572f0b35a72" target="_blank">Join the DAO</a></div>
          
          <div class='options-menu'><a href="Whitepaper_CRYPTOMURALS_v1_2022.pdf" target="_blank">WHITE PAPER</a></div>
          <!-- <div class='options-menu'>About</div> -->
        </div>
      </div>


      <!-- LOGIN/OUT -->
      <div style=" display: flex; flex-direction: row; margin: 0 auto; justify-content: flex-end; text-align: center; width: 200px;">
        <div id="logg" style="align-self: center; width: auto" class='btn-connect-container'>

          <!-- <div style="width:auto;height: 50px" class="btn-disconnect hidden" onclick="disconnectWallet()">
            <div style="border-radius: 50%; background-image: linear-gradient(90deg, rgba(46,167,227, 1) 0%, rgba(46, 167,227,1) 10%, rgba(250,4,254,1) 90%); color: white;" class='btn-connected'></div>
            <div style="font-family:Monda; color: white"> X 04 ...bD </div>
          </div> -->

          <button style=" border-radius: 25px; border: none; font-family: Monda; background-Image: linear-gradient(90deg, rgba(46,167,227, 1) 0%, rgba(46, 167,227,1) 10%, rgba(250,4,254,1) 90%); color: white; word-spacing: 5px;" class='btn-connect-wallet' 
          onclick="login()"> Connect Wallet </button>

        </div>
      </div>
    </div>


    <main style="height: 100%; flex-direction: column; display: flex">
      <div style="display: flex; flex: 1">
        <div style="margin: auto">
          <div class="white-grad">
            <div style="
                        margin: 0px auto;
                        text-align: center;
                        justify-content: center;
                        display: flex;
                        height: 100%;
                        align-items: center;
                        color: white;
                        font-size: 30px;
                        display: flex;
                        flex-direction: column;
                      ">
              <div class="circle-main-container-first">
                <div style="
                              font-family: Monoton;
                              display: flex;
                              word-spacing: 10px;
                            " class='circle-main'>
                  DISCOVER THE
                  <br />
                  MURALS OF
                </div>
                <div style="position: relative; min-width: 240px">
                  <div style="
                                border: 2px solid #c2c2c2;
                                background-color: #525252;
                                border-radius: 25px;
                                padding-right: 10px;
                                padding-left: 10px;
                                display: flex;
                                flex-direction: row;
                              " onclick="showOptionsCity()">
                    <div style="
                                  flex: 1;
                                  font-family: Monoton;
                                  color: #1ae2bd;
                                " class='circle-select'>
                      THE WORLD
                    </div>
                    <div style="fontSize: 14px; align-self: center">&#9660;</div>
                  </div>
                  <div class="options-city-container">
                  </div>
                </div>
                <div style="
                              font-family: Monoton;
                              word-spacing: 10px;
                            " class='circle-main'>
                  & COLLECT THEM
                </div>
              </div>
              <div style="
                            font-family: Monoton;
                            flex-direction: column;
                            word-spacing: 10px;
                          " class='circle-main circle-main-container-second hidden'>
                WELCOME TO
                <br />
                <div class="city-circle"></div>
                <br />
                <!-- <a style="font-family: Monda;letter-spacing: 3px;" class='link-city' href="/gallery"> -->
                  <p style="font-family: Monda;letter-spacing: 3px;" class='link-city' >
                  COMING SOON!
                  </p>
                <br>
                <a href="https://gardens.1hive.org/#/matic/garden/0x963d4a1cd9fb345a624e46c9470df572f0b35a72" target="_blank">Join the DAO</a>

              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- UNLOCKABLE CONTENT -->
      <div style=" display: none; text-align: center; align-self: center; margin: 20px; flex: 1; " class="community-symbol">
        <div style=" border-radius: 50%; width: 100px; height: 100px; background-Image: linear-gradient( 90deg, rgba(79, 143, 106, 1) 0%, rgba(55, 135, 127, 1) 26%, rgba(30, 127, 147, 1) 100%); color: white; text-align: center; display: flex; ">
          <div style=" flex: 1; justify-self: center; align-self: center; font-family: Monda; font-size: 18px; ">
            community unlockable content
          </div>
        </div>
      </div>

      <!-- SOCIAL ICONS -->
      <div class='container-icon-social-networks'>
        <div>
          <a href="https://www.instagram.com/cryptomurals/" target="_blank">
          <img width="24px" height="24px" color="white" src='./resources/twitter-brands.svg'
            style="margin: 10px; left: 0px" class='icon-social-networks' />
</a>          
          
            <a href="https://discord.com/invite/rv5kY7dGE4" target="_blank">
              <img width="24px" height="24px" color="white" src='./resources/discord-brands.svg'
            style="margin: 10px; left:34px" class='icon-social-networks' />
</a>
            <a href="https://www.instagram.com/cryptomurals/" target="_blank">
          <img width="24px" height="24px" color="white" src='./resources/instagram-brands.svg'
            style="margin: 10px; left: 68px" class='icon-social-networks' />
          </a>

            <a href="https://www.youtube.com/channel/UCTFJhD1wGT_stDUk3_dnwAw" target="_blank">
              <Img width="24px" height="24px" color="white" src='./resources/youtube-brands.svg'
                style="margin: 10px; left: 102px" class='icon-social-networks' />
            </a>

            <a href="https://join.status.im/c/0x03855e1dffc64d7647c7c043a5666f6f0384c1caa943ad848c63a0a51687436b55" target="_blank">
              <Img width="24px" height="24px" color="white" src='./resources/Status-logo_white.svg'
                style="margin: 10px; left: 136px" class='icon-social-networks' />
            </a>
            
        </div>
      </div>

    </main>
  </div>
  <script>
    const _btnHamburguerMenu = document.querySelector('.hamburguer-menu');
    const menuMain = document.querySelector('.menu-main');
    const cities = ['THE WORLD','PARIS', 'ROMA'];
    let city = 'THE WORLD';
    let resolutionSmall = false;
    let showOptions = false;


    _btnHamburguerMenu.addEventListener('click', (e) => {
      _btnHamburguerMenu.classList.toggle('is-active');
      menuMain.classList.toggle('hidden');
    });

    // const _btnConnectWallet = document.querySelector('.btn-connect-wallet');
    // const _btnDisconnectWallet = document.querySelector('.btn-disconnect');


    function ConnectWallet() {
      console.log('login!');
      login()
      // _btnConnectWallet.classList.toggle('hidden');
      // _btnDisconnectWallet.classList.toggle('hidden');
    }

    function disconnectWallet() {
      logOut();
      // _btnConnectWallet.classList.toggle('hidden');
      // _btnDisconnectWallet.classList.toggle('hidden');
    }



/*********************************************************************************************
.) LOGG stuff
**********************************************************************************************/


// 0. Check moralis
const serverUrl = "https://hyorvrgxcdmm.usemoralis.com:2053/server";
const appId = "Lx28OvD1jYsfl8Q52brKgUbJ1yGP9kWgffDg2hrU";
// Moralis.start({ serverUrl, appId });
// const CHAIN = "mumbai";
// const TOKEN_CONTRACT_ADDRESS = "0x41854405916B936Eb079F9F83d8077d67b72bCC9";



const init = async () => {
await Moralis.start({
  appId : appId,
  serverUrl: serverUrl
});
Moralis.initPlugins();
};

init();

//  LOGIN
async function login() {
  console.log('login tryied');
  let user = Moralis.User.current();
  if (!user) {
    try {
      let user = await Moralis.authenticate({
        signingMessage: "Hello from cryoptomurals!"
      })
      let userAddress = user.get('ethAddress');

      var x = userAddress;
      // var shortAddr = x.substring(0, 8) + "...";
      var shortAddr = x.substring(0, 6) + "..."+x.substring(38, 42);

      // document.getElementById("logg").innerHTML = "<p class='loged btn-grad-inv'>" + shortAddr + " <i class='logout fa fa-sign-out' aria-hidden='true' onclick='event.stopPropagation();logOut()'></i> </p> <p style='display:none' class='responsiveloged btn-grad-inv'> <i class='logout fa fa-sign-out' aria-hidden='true' onclick='event.stopPropagation();logOut()'></i> </p>";

      document.getElementById("logg").innerHTML=`  <div style="width:auto;height: 50px" class="" onclick="logOut()">
            <div style="border-radius: 50%; background-image: linear-gradient(90deg, rgba(46,167,227, 1) 0%, rgba(46, 167,227,1) 10%, rgba(250,4,254,1) 90%); color: white;" class='btn-connected'></div>
            <div style="font-family:Monda; color: white"> ${shortAddr}</div>
          </div>`

      console.log('User address: ', userAddress);

    } catch (error) {
      console.log(error)
    }
  } else {
    console.log('user is already here...');
    Moralis.enableWeb3(); //if user has a sesion authenticate is not called so metamaks is not initiated, here we fix this
    let userAddress = user.get('ethAddress');
    var x = userAddress;
    // var shortAddr = x.substring(0, 8) + "...";
    var shortAddr = x.substring(0, 6) + "..."+x.substring(38, 42);
    document.getElementById("logg").innerHTML=`  <div style="width:auto;height: 50px" class="" onclick="logOut()">
            <div style="border-radius: 50%; background-image: linear-gradient(90deg, rgba(46,167,227, 1) 0%, rgba(46, 167,227,1) 10%, rgba(250,4,254,1) 90%); color: white;" class='btn-connected'></div>
            <div style="font-family:Monda; color: white"> ${shortAddr}</div>
          </div>`

    // document.getElementById("logg").innerHTML = "<p class='loged btn-grad-inv'>" + shortAddr + " <i class='logout fa fa-sign-out' aria-hidden='true' onclick='event.stopPropagation();logOut()'></i> </p>";
    // document.getElementById("logg").innerHTML = `  <button style=" border-radius: 25px; border: none; font-family: Monda; background-Image: linear-gradient(90deg, rgba(46,167,227, 1) 0%, rgba(46, 167,227,1) 10%, rgba(250,4,254,1) 90%); color: white; word-spacing: 5px;" class='btn-connect-wallet' 
    //       onclick="login()"> Connect Wallet </button>`
    //  "<p class='loged btn-grad-inv'>" + shortAddr + " <i class='logout fa fa-sign-out' aria-hidden='true' onclick='event.stopPropagation();logOut()'></i> </p> <p style='display:none' class='responsiveloged btn-grad-inv'> <i class='logout fa fa-sign-out' aria-hidden='true' onclick='event.stopPropagation();logOut()'></i> </p>";

  }
}

// LOGOUT
async function logOut() {
  await Moralis.User.logOut();
  // document.getElementById("logg").innerHTML = `<button  class="btn-grad"   onclick="login();">Connect</button>`;
  document.getElementById("logg").innerHTML = `  <button style=" border-radius: 25px; border: none; font-family: Monda; background-Image: linear-gradient(90deg, rgba(46,167,227, 1) 0%, rgba(46, 167,227,1) 10%, rgba(250,4,254,1) 90%); color: white; word-spacing: 5px;" class='btn-connect-wallet' 
          onclick="login()"> Connect Wallet </button>`
  console.log("logged out");
}

    // ------------
    function showOptionsCity() {
      showOptions = !showOptions;
      let _optionsMenuCity = document.querySelector('.options-city-container');
      if (showOptions) {
        _optionsMenuCity.innerHTML = `<div style="background-color: #525252;
                                                    position: absolute;
                                                    margin-left: auto;
                                                    margin-right: auto;
                                                    left: 0;
                                                    right: 0;
                                                    text-align: center;" 
                                            class="city-options">
                                                ${cities.map((optionNext, index) => {
                                                    return (
                                                        `<div
                                                            key="${optionNext}"
                                                            style="font-family: Monoton"
                                                            class='circle-select'
                                                            onclick="selectCity(${Number(index)})"
                                                        >
                                                            ${optionNext}
                                                        </div>`
                                                    );
                                                }).join(" ")}
                                        </div>`
      } else {
        _optionsMenuCity.innerHTML = '';
      }

    }

    function selectCity(index) {
      index = Number(index);
      city = cities[index];
      showOptionsCity();
      const _cicleSelect = document.querySelector('.circle-select');
      _cicleSelect.textContent = city;
      const _logoMenu = document.querySelector('.logo-cryptomurals');
      const _citySelected = document.querySelector('.city-layout');
      _citySelected.textContent = city;

      const _circle = document.querySelector('.white-grad');
      const _cicleMainContainerFirst = document.querySelector('.circle-main-container-first');
      const _cicleMainContainerSecond = document.querySelector('.circle-main-container-second');
      const _circleCity = document.querySelector('.city-circle');
      _circleCity.textContent = city;

      const _community = document.querySelector('community-symbol');

      if (city != "THE WORLD") {
        _logoMenu.classList.remove('hidden');
        _circle.classList.add('white-grad-select');
        _cicleMainContainerFirst.classList.add('hidden');
        _cicleMainContainerSecond.classList.remove('hidden');
        // _community.classList.remove('content-unlock');
        // _community.classList.add('content-unlock-hidden');



      } else {
        _logoMenu.classList.add('hidden');
        _circle.classList.remove('white-grad-select');
        _cicleMainContainerFirst.classList.remove('hidden');
        _cicleMainContainerSecond.classList.add('hidden');
        _community.classList.add('content-unlock');
        _community.classList.remove('content-unlock-hidden');

        var _cityCircle = document.querySelector('city-circle');
        _cityCircle.textContent = city;
      }
    }

    window.addEventListener('resize', (e) => {
      resizeWindow();
    });

    function resizeWindow() {
      if (window.innerWidth <= 768) {
        resolutionSmall = true
      } else {
        resolutionSmall = false
      }

      const navLayout = document.querySelector('.nav-layout');
      console.log(navLayout.style.flexDirection);
      // // const _containerBtnConnect = document.querySelector('.btn-connect-container');
      // const _btnDisconnectWallet = document.querySelector(
      //   '.btn-disconnect'); //width: navPosition && city === 'THE WORLD' ? 200 : 'auto',
      // if (resolutionSmall && city === 'THE WORLD') {
      //   navLayout.style.flexDirection = 'column';
      //   _btnDisconnectWallet.style.width = '200px';
      //   _containerBtnConnect.style.width = '200px';
      // } else {
      //   navLayout.style.flexDirection = 'row';
      //   _btnDisconnectWallet.style.width = 'auto';
      //   _containerBtnConnect.style.width = 'auto';
      // }
    }

    resizeWindow();
  </script>
</body>

</html>